{% extends "common/panel.html" %}
{% load flatblock_tags %} 
{% block title %}{{title}}{% endblock %}
{% block panel %}

    <h4>{{title}}</h4>
    <br/>
    <div class="field required">
        {{ form.input_penalties.errors }}
        {{ form.input_targets.errors }}
        {{ form.input_relativecosts.errors }}
    </div>

<div class="tabbable">
    <ul class="nav nav-tabs" style="margin-bottom:0px;">
        <li class="active">
            <a href="#geographytab" data-toggle="tab">
                <span>Step 1: Geography</span>
            </a> </li>
        <li>
            <a href="#generaltab" data-toggle="tab">
                <span>Step 2: Describe </span>
            </a>
        </li>
        <li>
            <a href="#speciestab" data-toggle="tab">
                <span>Step 3: Targets</span>
            </a>
        </li>
        <li>
            <a href="#coststab" data-toggle="tab">
                <span>Step 4: Constraints</span>
            </a>
        </li>
    </ul>


    <div class="tab-content">

    <div id="geographytab" class="tab-pane active"> 
        <h4>{% flatblock 'form-geography-header' 3600 %}</h4>
        <p>Using the map, draw a box or click {% flatblock 'planning-units' 3600 %} to select. To navigate, use the keyboard controls.</p>
        <!-- TODO this doesnt work in IE, use  -->
        <a href="javascript:$('#step1Movie').toggle();" class="btn btn-mini">Need Help <i class="icon-question-sign"></i></a>
        <br/>
        <div id="step1Movie" style="display:none;">
            <!-- TODO animated gif -->
            <object style="width: 397px; height: 370px;" type="application/x-shockwave-flash" data="/media/seak/swf/select.swf">
                <param name="movie" value="select.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <p>You do not have the latest version of Flash installed. Please visit this link to download it: <a href="http://www.adobe.com/products/flashplayer/">http://www.adobe.com/products/flashplayer/</a></p>
            </object>
        </div>
        <br/>

        <div id="currentGeographySelection">
            You've selected <span id="geographySelectionCount">0</span> {% flatblock 'planning-units' 3600 %}.
        </div>

           
    <div id="counter"></div>
    <div id="area"></div>
    </div>

    <div id="generaltab" class="tab-pane"> 
        <h4>Provide a name and (optionally) a description of the prioritization scenario.</h4>
    <form id="featureform" action="{{action}}" method="post"> 
            <div class="hidden field required">
                {{ form.input_penalties }}            
                {{ form.input_targets }}            
                {{ form.input_relativecosts }}            
                {{ form.input_geography}}
                {{ form.input_scalefactor}}
            </div>
            <div class="field required">
                {{ form.name.label_tag }}
                {{ form.name.errors }}
                {{ form.name }}            
            </div>
            <div class="field">
                {{ form.description.label_tag }}
                {{ form.description.errors }}
                {{ form.description }}            
            </div>
            <p><input type="submit" value="submit"></p>
           <div>
           </div>
    </form>
    </div>

    <div id="speciestab" class="tab-pane">
        <h4>{% flatblock 'form-conservationfeature-header' 3600 %}</h4>
        <div> {% flatblock 'form-conservationfeature-description' 3600 %}</div>
        <br/>
        <br/>
        <form action="#" id="form-cfs">
          <table class="table table-condensed">
            {% for cf in cfs %}
            <tr>
                <td> {{cf.name}}: {{cf.id_string}} </td>
                <td><input type="text" class="slidervalue targetvalue" id="target---{{cf.id_string}}" value="0.5"/></td>
                <td><input type="text" class="slidervalue penaltyvalue" id="penalty---{{cf.id_string}}" value="0.5"/></td>
            </tr>
            {% endfor %}
          </table>
        </form>
    </div> <!-- End species tab -->

    <div id="coststab" class="tab-pane">
        <h4>{% flatblock 'form-costs-header' 3600 %}</h4>
        <div> {% flatblock 'form-costs-description' 3600 %}</div>
        <br/>
        <br/>
        <form action="#" id="form-costs">
          <table class="table table-condensed">
            {% for cost in costs %}
            <tr>
                <td><input type="checkbox" class="slidervalue costvalue" id="cost---{{cost.name}}" checked="1"/></td>
                <td> {{cost.name}} </td>
                <td> (<em>Avoid planning units with large values of {{cost.name}})</em> </td>
            </tr>
            {% endfor %}
          </table>
        </form>
    </div>
    </div>
  </div>
{% endblock panel %}
